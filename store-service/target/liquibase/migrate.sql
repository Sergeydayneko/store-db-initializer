-- *********************************************************************
-- Update Database Script
-- *********************************************************************
-- Change Log: src/main/resources/liquibase/liquibase-changelog-master.xml
-- Ran at: 3/19/20, 12:59 PM
-- Against: postgres@jdbc:postgresql://localhost:5432/store
-- Liquibase version: 3.8.7
-- *********************************************************************

-- Lock Database
UPDATE databasechangeloglock SET LOCKED = TRUE, LOCKEDBY = '172.17.0.1 (172.17.0.1)', LOCKGRANTED = '2020-03-19 12:59:51.507' WHERE ID = 1 AND LOCKED = FALSE;

-- Changeset src/main/resources/liquibase/changelog/01-create-brand-schema.xml::pr-1::sdayneko
CREATE TABLE purchase_management.brand (brand_id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, brand_name VARCHAR(50) NOT NULL, CONSTRAINT brand_pkey PRIMARY KEY (brand_id), UNIQUE (brand_id), UNIQUE (brand_name));

INSERT INTO databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('pr-1', 'sdayneko', 'src/main/resources/liquibase/changelog/01-create-brand-schema.xml', NOW(), 3, '8:f8ad2d6d8f4e6f0096161dc301286cbb', 'createTable tableName=brand', '', 'EXECUTED', NULL, NULL, '3.8.7', '4611993624');

-- Changeset src/main/resources/liquibase/changelog/02-create-type-schema.xml::pr-2::sdayneko
CREATE TABLE purchase_management.type (type_id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, type_name VARCHAR(255) NOT NULL, CONSTRAINT type_pkey PRIMARY KEY (type_id), UNIQUE (type_name), UNIQUE (type_id));

INSERT INTO databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('pr-2', 'sdayneko', 'src/main/resources/liquibase/changelog/02-create-type-schema.xml', NOW(), 4, '8:db1ff35164079aedd049c4efbd465f5b', 'createTable tableName=type', '', 'EXECUTED', NULL, NULL, '3.8.7', '4611993624');

-- Changeset src/main/resources/liquibase/changelog/03-create-product-schema.xml::pr-3::sdayneko
CREATE TABLE purchase_management.product (product_id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, product_name VARCHAR(100) NOT NULL, product_type INTEGER, product_brand INTEGER, CONSTRAINT product_pkey PRIMARY KEY (product_id), CONSTRAINT brand_fkey FOREIGN KEY (product_brand) REFERENCES purchase_management.brand(brand_id), CONSTRAINT type_fkey FOREIGN KEY (product_type) REFERENCES purchase_management.type(type_id), UNIQUE (product_id));

INSERT INTO databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('pr-3', 'sdayneko', 'src/main/resources/liquibase/changelog/03-create-product-schema.xml', NOW(), 5, '8:62fe4402e8b140e8824ccc78663c7ad7', 'createTable tableName=product', '', 'EXECUTED', NULL, NULL, '3.8.7', '4611993624');

-- Changeset src/main/resources/liquibase/changelog/04-create-store-point-schema.xml::pr-4::sdayneko
CREATE TABLE purchase_management.store_point (store_point_id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, store_point_name VARCHAR(100) NOT NULL, store_point_address VARCHAR(255) NOT NULL, CONSTRAINT store_point_fk PRIMARY KEY (store_point_id), UNIQUE (store_point_address), UNIQUE (store_point_id));

INSERT INTO databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('pr-4', 'sdayneko', 'src/main/resources/liquibase/changelog/04-create-store-point-schema.xml', NOW(), 6, '8:a9395d613059d3c7691f252cd247c101', 'createTable tableName=store_point', '', 'EXECUTED', NULL, NULL, '3.8.7', '4611993624');

-- Release Database Lock
UPDATE databasechangeloglock SET LOCKED = FALSE, LOCKEDBY = NULL, LOCKGRANTED = NULL WHERE ID = 1;

